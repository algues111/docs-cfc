
<!DOCTYPE html>


<html lang="fr" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Module 362 : Mettre en service les systèmes vocaux et vidéo complexes &#8212; Documentation Modules CFC IBM 0.1</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=0dc8974b"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script src="_static/translations.js?v=d99ca74e"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Documentation-M362';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Module 144 : Réseaux sans-fil (en travaux)" href="Documentation-M144.html" />
    <link rel="prev" title="Documentation CFC-IBM" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="fr"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Passer au contenu principal</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Haut de page
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">Documentation Modules CFC IBM 0.1</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Recherche</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Module 362 : Mettre en service les systèmes vocaux et vidéo complexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation-M144.html">Module 144 : Réseaux sans-fil (en travaux)</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation-M233.html">Module 233 : Protéger et assurer la maintenance d’un réseau</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Téléchargez cette page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Documentation-M362.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Télécharger le fichier source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimer au format PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Mode plein écran"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="clair/sombre" aria-label="clair/sombre" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Recherche" aria-label="Recherche" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Module 362 : Mettre en service les systèmes vocaux et vidéo complexes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenu </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cx">3CX</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#qu-est-ce-que-3cx">Qu’est-ce que 3CX ?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#licences">Licences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#differents-types-d-installation">Différents types d’installation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#linux">Linux</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interface">Interface</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#web-interface-admin">Web interface (admin)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#web-interface-client">Web Interface (client)</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#chats-chats-de-groupe">Chats &amp; Chats de groupe</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#meetings">Meetings</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#historique-des-appels">Historique des appels</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#cahier-de-contacts">Cahier de contacts</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#boite-de-messagerie-vocale">Boîte de messagerie vocale</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reseau-telephonie">Réseau &amp; Téléphonie</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generalites-reseau">Généralités Réseau</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dect-digital-enhanced-cordless-telecommunications">DECT : Digital Enhanced Cordless Telecommunications</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ata-analogic-terminal-adapter">ATA : Analogic terminal adapter</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exigences-reseau">Exigences réseau</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fonctions-de-reseau">Fonctions de réseau</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#poe-power-over-ethernet">PoE (Power over Ethernet)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lldp-link-layer-discovery-protocol">LLDP (Link Layer Discovery Protocol)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#stun-simple-traversal-of-udp-over-nat">STUN (Simple Traversal of UDP over NAT)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sbc-session-board-controller">SBC (Session Board Controller)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generalites-telephonie">Généralités Téléphonie</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#codecs-audio">Codecs audio</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g711">G711</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g722">G722</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g729">G729</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sip-trunk">SIP trunk</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dtmf">DTMF</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ivr">IVR</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercices">Exercices</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-1">Exercice 1</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#demande">Demande</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow">Workflow</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-2">Exercice 2</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#nat-pat-avec-installation-app-natel-externe">1 - NAT / PAT avec installation app natel externe</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#app-1-webclient-en-interne-avec-wireshark">2 - 1 App + 1 Webclient en interne avec Wireshark</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#telephones-sip-avec-wireshark-comparaison-g711-g722-g729">3 - 2 Téléphones SIP avec Wireshark (comparaison G711/G722/G729 )</a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-362-mettre-en-service-les-systemes-vocaux-et-video-complexes">
<h1>Module 362 : Mettre en service les systèmes vocaux et vidéo complexes<a class="headerlink" href="#module-362-mettre-en-service-les-systemes-vocaux-et-video-complexes" title="Link to this heading">#</a></h1>
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/a/a2/3CX_Logo_-_Wiki.png"><img alt="https://upload.wikimedia.org/wikipedia/commons/a/a2/3CX_Logo_-_Wiki.png" class="align-right" src="https://upload.wikimedia.org/wikipedia/commons/a/a2/3CX_Logo_-_Wiki.png" style="height: 32px;" /></a>
<section id="cx">
<h2>3CX<a class="headerlink" href="#cx" title="Link to this heading">#</a></h2>
<section id="qu-est-ce-que-3cx">
<h3>Qu’est-ce que 3CX ?<a class="headerlink" href="#qu-est-ce-que-3cx" title="Link to this heading">#</a></h3>
<p>3CX est une <strong>solution de communications virtuelle</strong> qui permet aux entreprises de gérer leurs appels téléphoniques, leur messagerie instantanée, leur vidéoconférence ainsi que tous les services que pourrait proposer un PBX classique, grâce à différentes installations et forfaits.</p>
<p>12 millions d’utilisateurs l’utilisent chaque jour, le placant donc sans souci sur le podium des leaders mondiaux de la téléphonie !</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-paccueil.png" class="align-center" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-paccueil.png" />
</section>
<hr class="docutils" />
<section id="licences">
<h3>Licences<a class="headerlink" href="#licences" title="Link to this heading">#</a></h3>
<p>Pour avoir une vue d’ensemble plus concrète de ce que propose 3CX en tant que service ou système, il est important de connaître les différentes licences proposées par l’entreprise du même nom.
Le choix de la licence est une décision importante dans la solution que vous proposerez à votre client, car certaines fonctionnalités ne seront pas disponibles selon la licence choisie.</p>
<p>Il est donc recommandé de suivre les formations 3CX et de passer la certification gratuite disponible avec ce lien : <a class="reference external" href="https://portal.3cx.com/customer/certification">https://portal.3cx.com/customer/certification</a></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-licences.png" class="align-center" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-licences.png" />
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Le principal défaut de la licence FREE réside dans le fait que les MàJ ne sont pas possibles sauf si vous payez pour une upgrade après 5-6 versions env.</p>
</div>
<p><em>Remarque : nombre de canaux int. / ext. réunis</em></p>
</section>
<hr class="docutils" />
<section id="differents-types-d-installation">
<h3>Différents types d’installation<a class="headerlink" href="#differents-types-d-installation" title="Link to this heading">#</a></h3>
<p></p>
<a class="reference internal image-reference" href="https://imgs.search.brave.com/t5Gh4h12EKJUKsBYlQEidsH_O2SyxBPQABqSv3rnPxU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9icmFu/ZHNsb2dvcy5jb20v/d3AtY29udGVudC91/cGxvYWRzL2ltYWdl/cy9kZWJpYW4tbG9n/by5wbmc"><img alt="https://imgs.search.brave.com/t5Gh4h12EKJUKsBYlQEidsH_O2SyxBPQABqSv3rnPxU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9icmFu/ZHNsb2dvcy5jb20v/d3AtY29udGVudC91/cGxvYWRzL2ltYWdl/cy9kZWJpYW4tbG9n/by5wbmc" class="align-right" src="https://imgs.search.brave.com/t5Gh4h12EKJUKsBYlQEidsH_O2SyxBPQABqSv3rnPxU/rs:fit:860:0:0/g:ce/aHR0cHM6Ly9icmFu/ZHNsb2dvcy5jb20v/d3AtY29udGVudC91/cGxvYWRzL2ltYWdl/cy9kZWJpYW4tbG9n/by5wbmc" style="height: 32px;" /></a>
<section id="linux">
<h4>Linux<a class="headerlink" href="#linux" title="Link to this heading">#</a></h4>
<p></p>
<p>Chez 3CX, le principal avantage de leur système est leur <strong>OS basé sur Debian</strong> qui est <strong>optimisé pour leur PBX virtuel.</strong></p>
<p>L’installation s’avère simple si l’on est familiarisé avec le milieu de la virtualisation sous linux.</p>
<p></p>
<p><strong>Votre machine a besoin d’au moins 1 cœur de processeur dédié et de 2Go de RAM. Si vous hébergez vous-même votre machine et que votre hébergeur utilise une unité centrale partagée, vous avez besoin de 2 cœurs !</strong></p>
<p>Passez en revue les spécifications matérielles suggérées afin d’allouer du temps d’unité centrale et des ressources de mémoire vive supplémentaires en fonction des critères suivants :</p>
<ul class="simple">
<li><p>Nombre d’appels simultanés gérés par le système.</p></li>
<li><p>Nombre d’utilisateurs actifs - 100 sessions actives du client Web sont plus exigeantes que 100 appels occasionnels via des téléphones IP.</p></li>
<li><p>L’utilisation de l’enregistrement des appels - le système est sollicité pour le mixage audio et le stockage des fichiers.</p></li>
</ul>
<blockquote>
<div><p>3CX peut être installé sur n’importe quel système fonctionnant sous Debian 12. Si vous souhaitez faire une installation barebone, assurez-vous que le matériel fonctionne avec Debian 12 et que le fournisseur du matériel vous aidera en cas de problème. Nous ne pouvons pas vous aider à résoudre les problèmes liés à l’installation de Debian 10 sur du matériel «  barebone « .</p>
<p>Ne configurez pas de réseau virtuel, d’interface VPN ou d’option TeamViewer VPN sur l’hôte 3CX.</p>
</div></blockquote>
<p>Pour les autres prérequis liés à la virtualisation, au réseau etc… Je vous invite à vous référer à leur documentation complète disponible avec le lien ci-dessous :</p>
<p><strong>https://www.3cx.fr/docs/manuel/installation-debian-linux-ipbx/</strong></p>
<p>Voici aussi le lien pour le téléchargement de l’iso linux de 3CX :</p>
<p><strong>https://downloads-global.3cx.com/downloads/debian10iso/debian-amd64-netinst-3cx.iso</strong></p>
<img alt="https://lh7-us.googleusercontent.com/dnv4yC4v_g33UFLJcYGuXi3QmSsWkMeu_Iir9wF8EmmyCZTKqkXkgFiIYQfmL_WMYjxXJoSGsAFnsz2kkg3GRqR_GmU9pxCSW8YbKFS63S5mnrrJkDrqopNUzxvNp9oaYDly7gzf0vpt7Ug" class="align-center" src="https://lh7-us.googleusercontent.com/dnv4yC4v_g33UFLJcYGuXi3QmSsWkMeu_Iir9wF8EmmyCZTKqkXkgFiIYQfmL_WMYjxXJoSGsAFnsz2kkg3GRqR_GmU9pxCSW8YbKFS63S5mnrrJkDrqopNUzxvNp9oaYDly7gzf0vpt7Ug" />
<p></p>
<p><em>Premier lancement de l’iso de 3CX</em></p>
<p>Choisissez ce que vous préférez en fonction de vos habitudes d’installation de distributions Linux.</p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-linux.png"><img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-linux.png" class="align-center" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-linux.png" style="height: 470px;" /></a>
<p></p>
<p><em>Attendre que l’installation s’effectue et choisir les options correspondantes à vos besoins (FQDN…)</em></p>
<hr class="docutils" />
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-CLI.png" class="align-center" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-CLI.png" />
<p></p>
<p>Lorsque votre VM aura redémarré et que vous aurez cette interface de disponible, je vous conseille d’installer 3CX avec votre navigateur web comme support visuel.</p>
<p></p>
<blockquote>
<div><p>L’installation en CLI étant réservée aux utilisateurs aguerris de 3CX, je ne le vous recommanderais seulement si vous nécessitez de paramètres spéciaux/avancés.</p>
</div></blockquote>
<p>
</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/conf-3cx1.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/conf-3cx1.png" />
<p></p>
<ul class="simple">
<li><p><em>Upload a new configuration file create on 3CX</em></p></li>
<li><p><em>Restore a backup</em></p></li>
<li><p><em>Install without config file (legacy, not recommended)</em></p></li>
</ul>
<p>Nous utiliserons la 3ème option pour cette installation.</p>
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/conf-3cx2.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/conf-3cx2.png" />
<p></p>
<p>Cette étape nous permet de configurer les différents ports utilisés par les services de 3CX.</p>
<blockquote>
<div><p>Si seulement votre instance 3CX tourne sur votre VM, je vous conseille de laiser les ports par défaut proposer par le wizard d’installation.</p>
<p>Dans le cas contraire, utilisez des ports qui ne sont pas utilisés par d’autres services!</p>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Astuce</p>
<p>Pour manager vos systèmes ainsi que vos licences 3CX, vous pouvez accéder à l’url ci-dessous : <a class="reference external" href="https://portal.3cx.com/customer/systems/">https://portal.3cx.com/customer/systems/</a></p>
</div>
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/licence.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/licence.png" />
<p></p>
<hr class="docutils" />
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/2/2a/Windows_Logo_2012-2015.png"><img alt="https://upload.wikimedia.org/wikipedia/commons/2/2a/Windows_Logo_2012-2015.png" class="align-right" src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Windows_Logo_2012-2015.png" style="height: 32px;" /></a>
</section>
<section id="windows">
<h4>Windows<a class="headerlink" href="#windows" title="Link to this heading">#</a></h4>
<p>Il est aussi possible d’héberger votre PBX 3CX sous l’OS Windows.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Cependant, cela nécessitera des connaissances avancées, car vous vous retrouverez face à des contraintes plus récurrentes que sur Linux.</p>
<p>Par exemple, lors des MàJ Windows, il est possible que l’état du Firewall Windows Defender se réinitialise et donc efface les règles de traffics entrants/sortants permettant au 3CX et aux téléphones liés de fonctionner correctement.</p>
</div>
<p>De plus, Windows est par défaut plus vulnérable que Linux, de par son architecture et car il est l’OS le plus répandu !</p>
<p>Lorsque l’installation est terminée, on peut remarquer dans le fichier hosts de notre OS Windows que 3CX a rajouté cette ligne :</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">127.0.0.1</span> <span class="pre">arthur.3cx.ch</span></code></p>
</div></blockquote>
<p>Cette dernière permet, lorsque nous tapons l’URL en question dans notre navigateur, que notre ordinateur pointe vers notre adresse loopback.</p>
<p>Attention, cela se produit seulement si vous précisez que vous n’avez pas votre propre configuration DNS pour le serveur 3CX.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-hosts.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-hosts.png" />
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Un manuel complet du PBX 3CX est disponible sur ce lien :
<a class="reference external" href="https://www.3cx.fr/docs/manuel/avance/">https://www.3cx.fr/docs/manuel/avance/</a></p>
</div>
</section>
</section>
<hr class="docutils" />
<section id="interface">
<h3>Interface<a class="headerlink" href="#interface" title="Link to this heading">#</a></h3>
<section id="web-interface-admin">
<h4>Web interface (admin)<a class="headerlink" href="#web-interface-admin" title="Link to this heading">#</a></h4>
<p>Après avoir terminé la configuration du 3CX, vous pourrez accéder à l’URL correspondante à l’installation de votre 3CX (<em>ici arthur.3cx.ch:5001</em>), et ainsi vous logger avec les identifiants administrateur précédemment choisis.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-login.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/3cx-login.png" />
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/dashboard.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/dashboard.png" />
<p></p>
<p>Après s’être identifiés, nous débarquons sur l’interface admin.</p>
<p>Pour avoir une ligne entrante et sortante opérationnelle, il est nécessaire de configurer un trunk SIP.
3CX prend en charge plusieurs opérateurs en Suisse, notamment sipcall…</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/sip-trunk.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/sip-trunk.png" />
<p></p>
<p>Ci-dessus, nos 2 trunks sont déjà configurés. Nous pouvons cependant plonger dans leur configuration afin de comprendre les paramètres incontournables :</p>
<blockquote>
<div><ul class="simple">
<li><p>Nom du trunk</p></li>
<li><p>Nom ou IP du registrar</p></li>
<li><p>Proxy sortant</p></li>
<li><p>Nombre d’appels simultanés</p></li>
<li><p>Type d’authentification</p></li>
<li><p>ID d’authentification (user ID)</p></li>
<li><p>Mot de passe</p></li>
<li><p>Routage (que l’on verra plus loin dans la documentation)</p></li>
</ul>
</div></blockquote>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/telco1a.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/telco1a.png" />
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/telco1b.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/telco1b.png" />
</section>
<section id="web-interface-client">
<h4>Web Interface (client)<a class="headerlink" href="#web-interface-client" title="Link to this heading">#</a></h4>
<p>Il est possible d’accéder à l’interface webclient et ainsi d’avoir des fonctionnalités UCC proposées par 3CX :</p>
<p>Cela inclut :</p>
<blockquote>
<div><ul class="simple">
<li><p>Chats</p></li>
<li><p>Chats de groupe</p></li>
<li><p>Meetings (avec caméra, micro, partage d’écran/app…)</p></li>
<li><p>Historique des appels</p></li>
<li><p>Cahier de contacts</p></li>
<li><p>Boîte de messagerie vocale</p></li>
</ul>
</div></blockquote>
<p>Tout est accessible depuis le menu latérale de gauche :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient.png" />
<p></p>
<section id="chats-chats-de-groupe">
<h5>Chats &amp; Chats de groupe<a class="headerlink" href="#chats-chats-de-groupe" title="Link to this heading">#</a></h5>
<p>L’interface des chats est assez rudimentaire mais efficace.
Elle permet de partager des fichiers, faire des listes à puces…</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient-chat.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient-chat.png" />
<p></p>
</section>
<section id="meetings">
<h5>Meetings<a class="headerlink" href="#meetings" title="Link to this heading">#</a></h5>
<p>3CX permet notamment de faire des conférences en ligne, grâce à une interface intuitive et pratique.
Pour pouvoir profiter pleinement de toutes ces fonctionnalités, il est nécessaire d’accorder l’accès au micro et webcam à votre navigateur web.</p>
<p>Durant ces conférences, il est possible de partager son écran et de donner la main à un des collaborateurs présents dans la réunion.
Partager des fichiers et écrire dans un chat dédié est aussi possible !</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient-meeting.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/webclient-meeting.png" />
<p></p>
</section>
<section id="historique-des-appels">
<h5>Historique des appels<a class="headerlink" href="#historique-des-appels" title="Link to this heading">#</a></h5>
<p>Affichage de l’historique des appels entrants et sortants passés.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/callhistory.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/callhistory.png" />
<p></p>
</section>
<section id="cahier-de-contacts">
<h5>Cahier de contacts<a class="headerlink" href="#cahier-de-contacts" title="Link to this heading">#</a></h5>
<p>Un cahier des contacts existe, donnant la possibilité d’enregistrer des fiches contacts.
Pour aller plus loin, une intégration LDAP est même possible pour télécharger l’annuaire depuis un serveur LDAP. (disponible pour la licence 3CX Pro)</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/phonebook.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/phonebook.png" />
<p></p>
</section>
<section id="boite-de-messagerie-vocale">
<h5>Boîte de messagerie vocale<a class="headerlink" href="#boite-de-messagerie-vocale" title="Link to this heading">#</a></h5>
<p>Comme son nom l’indique, la boîte de messagerie vocale permet d’écouter les messages vocaux laisser par les appelants.</p>
</section>
</section>
</section>
</section>
<section id="reseau-telephonie">
<h2>Réseau &amp; Téléphonie<a class="headerlink" href="#reseau-telephonie" title="Link to this heading">#</a></h2>
<section id="generalites-reseau">
<h3>Généralités Réseau<a class="headerlink" href="#generalites-reseau" title="Link to this heading">#</a></h3>
<section id="dect-digital-enhanced-cordless-telecommunications">
<h4>DECT : Digital Enhanced Cordless Telecommunications<a class="headerlink" href="#dect-digital-enhanced-cordless-telecommunications" title="Link to this heading">#</a></h4>
<p>La tehnologie DECT est un standard de communication téléphonique sans-fil.</p>
<p>Ses caractéristiques sont les suivantes :</p>
<blockquote>
<div><ul class="simple">
<li><p>Longue portée (jusqu’à 50 m à l’intérieur, jusqu’à 300 m à l’extérieur)</p></li>
<li><p>Haut niveau de sécurité contre les interceptions</p></li>
<li><p>Très bon rendement énergétique</p></li>
<li><p>Gamme de fréquences distincte qui ne dépend pas du WiFi</p></li>
<li><p>Meilleure qualité sonore qu’avec les normes précédentes</p></li>
<li><p>Application polyvalente</p></li>
<li><p>Possibilité d’utiliser plusieurs combinés en même temps</p></li>
<li><p>Appels internes gratuits</p></li>
<li><p>Les combinés peuvent être utilisés sur plusieurs stations de base</p></li>
<li><p>Les combinés multi-fournisseurs peuvent être utilisés sur les stations de base</p></li>
<li><p>Changement automatique de station de base (handover)</p></li>
</ul>
</div></blockquote>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/dect-yealink.png"><img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/dect-yealink.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/dect-yealink.png" style="height: 300px;" /></a>
<p></p>
<p><strong>Bande de fréquence :</strong> de 1880 à 1920MHz</p>
<ul class="simple">
<li><dl class="simple">
<dt>Divisé en 2 plages distinctes :</dt><dd><ul>
<li><p>1880-1900 : émission</p></li>
<li><p>1900-1920 : réception</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Chaque plage contient 12 canaux</p></li>
<li><p>8 canaux pour la communication</p></li>
<li><p>4 canaux pour la signalisation</p></li>
<li><p>TDM dans chaque canal permettant 10 personnes par canal, ce qui revient à 80 communications en simultanées maximum.</p></li>
</ul>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/bande-dect.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/bande-dect.png" />
<p></p>
<p><strong>Différence DECT VS SIP-DECT</strong></p>
<p>Gestion des canaux :</p>
<p>DECT : Central téléphonique agissant en tant qu’OMM (Office manager mobile) et gèrant la partie sans-fil via un protocole propriétaire.</p>
<p>SIP DECT : Antennes liées au switch, avec une antenne master (OMM), autres antennes slave, protocole LLDP (broadcast)</p>
<p>Schéma réseau d’une installation DECT incluant à la fois une base numérique et une base IP :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-dect-digital-ip.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-dect-digital-ip.png" />
<p><em>Source : avaya.com</em></p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Ce dernier provient du document pdf suivant, étant la propriété intellectuelle d’Avaya :</p>
<p><a class="reference external" href="https://ipofficekb.avaya.com/businesspartner/ipoffice11_1fr/mergedProjects/manuals/install/IP%20Office%20DECT%20R4%20Installation%20Guide_fr.pdf">https://ipofficekb.avaya.com/businesspartner/ipoffice11_1fr/mergedProjects/manuals/install/IP%20Office%20DECT%20R4%20Installation%20Guide_fr.pdf</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Le broadcast est désactivé par défaut sur les switchs CISCO et sur d’autres marques, <strong>bloquant donc le broadcast du LLDP</strong>.
Ceci crée des <strong>problèmes de connexions</strong> des terminaux aux antennes SIP DECT.
Il est alors vivement recommandé <strong>d’autoriser les trames broadcast</strong> sur le switch.</p>
</div>
<p>Connection DECT :</p>
<p>2 fils, DSI (mitel), propriétaire…</p>
<p>Connexion SIP DECT :</p>
<p>Connexion au PBX via SIP puis configuration XML envoyée par le serveur</p>
</section>
<section id="ata-analogic-terminal-adapter">
<h4>ATA : Analogic terminal adapter<a class="headerlink" href="#ata-analogic-terminal-adapter" title="Link to this heading">#</a></h4>
<p>Le principe de l’ATA est en réalité très simple ; il permet de convertir un signal analogique en un signal numérique et inversement.
Cela permet donc de connecter un ancien téléphone analogique ou un FAX à un réseau numérique (souvent IP).</p>
<p>Cependant la méthode de conversion est différente pour le FAX (protocole T.38), il est alors simportant de choisir minutieusement l’ATA que nous installons.</p>
<p>Un ATA comporte en général minimum 2 ports RJ11 pour les appareils analogiques ainsi qu’un port RJ45 pour le connecter au réseau IP.
Les plus sophistiqués d’entre eux peuvent aussi être dotés de la capacité d’être alimenté en PoE et d’avoir un port RJ45 pour le WAN directement par exemple.</p>
<p>Voici une photo d’un ATA relativement classique :</p>
<a class="reference internal image-reference" href="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ata.png"><img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ata.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ata.png" style="height: 230px;" /></a>
<p></p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Ce sujet est abordé dans le module M114 de 1ère année, je vous invite donc à vous référer à ces liens pour plus d’informations au sujet du PCM30 / MIC !</p>
<ul class="simple">
<li><p><a class="reference external" href="https://fr.wikipedia.org/wiki/Modulation_par_impulsions_et_codage">https://fr.wikipedia.org/wiki/Modulation_par_impulsions_et_codage</a></p></li>
<li><p><a class="reference external" href="https://www.chireux.fr/mp/TIPE/ADS/Modulation_telephonie.pdf">https://www.chireux.fr/mp/TIPE/ADS/Modulation_telephonie.pdf</a></p></li>
<li><p><a class="reference external" href="https://www.universalis.fr/media/principe-de-la-modulation-par-impulsions-et-codage-v22n0038/">https://www.universalis.fr/media/principe-de-la-modulation-par-impulsions-et-codage-v22n0038/</a></p></li>
</ul>
</div>
<p>Schéma réseau d’une installation IP / SIP intégrant des appareils analogiques :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-sip-ata.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-sip-ata.png" />
<p>Attention aux recommandations des fournisseurs</p>
</section>
</section>
<hr class="docutils" />
<section id="exigences-reseau">
<h3>Exigences réseau<a class="headerlink" href="#exigences-reseau" title="Link to this heading">#</a></h3>
<p>Ce chapitre se base sur le cours 07-Exigences Réseau du cockpitprofessionnel.ch</p>
<p>La durée d’exécution des paquets vocaux est un critère essentiel pour la qualité vocale. On s’intéresse ici au délai total entre la parole de l’émetteur et l’écoute du récepteur (délai de bout en bout).</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/latence.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/latence.png" />
<p></p>
<p>Il désigne la différence de délai de transmission de bout en bout entre différents paquets d’un même flux de paquets lors d’une transmission d’un système à l’autre.
Il s’agit en réalité d’une variation de lantence.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/jitter.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/jitter.png" />
<p></p>
<p>Un paquet vocal contient seulement 20 à 30 ms de paroles, ce qui correspond environ à une syllabe. Un codec doit pouvoir compenser jusqu’à 5% de perte de données, ce qui n’est pas entendu lors d’une conversation téléphonique.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/pertedepaquets.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/pertedepaquets.png" />
<p>Si ces exigences de réseau ne sont pas tenues, les erreurs suivantes peuvent apparaître:</p>
<blockquote>
<div><ul class="simple">
<li><p>Conversation entrecoupées</p></li>
<li><p>Retards de paroles</p></li>
<li><p>Durée prolongée de l’établissement de la connexion</p></li>
<li><p>Volume de la conversation trop faible</p></li>
</ul>
</div></blockquote>
</section>
<section id="fonctions-de-reseau">
<h3>Fonctions de réseau<a class="headerlink" href="#fonctions-de-reseau" title="Link to this heading">#</a></h3>
<section id="poe-power-over-ethernet">
<h4>PoE (Power over Ethernet)<a class="headerlink" href="#poe-power-over-ethernet" title="Link to this heading">#</a></h4>
<p>La norme IEEE 802.3af, aussi appelée PoE, permet, initialement, de faire passer une alimentation en courant continu d’une puissance de max. 15,4W avec une tension d’environ 48V, en plus des données avec un débit de 100Mbit/s à 1Gbit/s.
Aujourd’hui la norme initiale a évolué (avec le PoE+, et PoE++), permettant de faire passer plus de courant, et donc d’alimenter des appareils de plus en plus gourmands en énergie !</p>
<p>Tableau des normes PoE à voir ci-dessous :</p>
<img alt="normes-poe" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/normes-poe.png" />
</section>
<hr class="docutils" />
<section id="lldp-link-layer-discovery-protocol">
<h4>LLDP (Link Layer Discovery Protocol)<a class="headerlink" href="#lldp-link-layer-discovery-protocol" title="Link to this heading">#</a></h4>
<p>Le protocole LLDP (Link Layer Discovery Protocol) est un protocole de découverte des voisins de couche 2 qui permet aux périphériques d’annoncer des informations sur eux-mêmes à leurs voisins directement connectés au même réseau.
Ces informations sont également enregistrées dans des banques de données d’informations de gestion (MIB) locales.
Sur les appareils compatibles LLDP, un agent LLDP est installé, ce dernier émettant des annonces de toutes les interfaces physiques, à intervalles réguliers ou lors de modifications.</p>
<p>Voici quelques-unes des informations qui peuvent être recueillies par LLDP (seules des informations minimales sont obligatoires) :</p>
<blockquote>
<div><ul class="simple">
<li><p>Nom et description du système</p></li>
<li><p>Nom et description du port</p></li>
<li><p>Nom et identifiant du VLAN</p></li>
<li><p>Adresse de gestion du réseau IP</p></li>
<li><p>Capacités de l’appareil (par exemple, commutateur, routeur ou serveur)</p></li>
<li><p>Informations sur l’adresse MAC et la couche physique</p></li>
<li><p>Informations sur l’alimentation</p></li>
<li><p>Informations d’agrégation de liens</p></li>
</ul>
</div></blockquote>
<p>En téléphonie IP, ce sont principalement les classes PoE nécessaires, l’ID VLAN et les paramètres QoS qui sont transmis.
Cette option <strong>devrait être activée sur les terminaux et sur les switchs Ethernet.</strong></p>
<blockquote>
<div><div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Ce protocole étant complexe et n’étant pas l’objet central de cette documentation, je vous invite à vous renseigner sur ce site :
<a class="reference external" href="https://www.noction.com/blog-francais/decouverte-peers-bgp-lldp">https://www.noction.com/blog-francais/decouverte-peers-bgp-lldp</a></p>
</div>
</div></blockquote>
</section>
<section id="stun-simple-traversal-of-udp-over-nat">
<h4>STUN (Simple Traversal of UDP over NAT)<a class="headerlink" href="#stun-simple-traversal-of-udp-over-nat" title="Link to this heading">#</a></h4>
<p>Ce système permet la connexion d’appareils à distance à travers du NAT.
Pour de la VoIP, cela inclut PAR appareil :</p>
<blockquote>
<div><ul class="simple">
<li><p>1 port SIP</p></li>
<li><p>10 ports RTP</p></li>
</ul>
</div></blockquote>
<p>Cela fonctionne mais demande <strong>beaucoup de temps</strong> et est <strong>très complexe</strong> à mettre en place à grande échelle</p>
<p>Cette solution est en générale <strong>non recommandée</strong> par les opérateurs.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/stun_binding.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/stun_binding.png" />
<p><em>Source : nexcom.fr</em></p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Le site ci-dessous explique bien et de manière précise le STUN, je vous invite donc à vous y référer si intéressé !
<a class="reference external" href="https://www.nexcom.fr/stun-la-base/">https://www.nexcom.fr/stun-la-base/</a></p>
</div>
</section>
<section id="sbc-session-board-controller">
<h4>SBC (Session Board Controller)<a class="headerlink" href="#sbc-session-board-controller" title="Link to this heading">#</a></h4>
<p>Le SBC permet de garantir le fonctionnement et la qualité du service de l’opérateur jusqu’à leur SBC qui se situe à l’intérieur de notre réseau.</p>
<p>Il permet notamment de :</p>
<blockquote>
<div><ul class="simple">
<li><p>Sécuriser les communications</p></li>
<li><p>Gérer la QoS (différencier les appels d’urgences par exemple)</p></li>
<li><p>D’agir en tant qu’intermédiaire entre les réseaux et ainsi garantir l’interopérabilité des protocoles de communication</p></li>
</ul>
</div></blockquote>
<p>Puisqu’une image vaut plus que 1000 mots, vous trouverez ci-dessous un schéma réseau intégrant un SBC :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/SBC.jpg" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/SBC.jpg" />
<p><em>Source : Napsis.fr</em></p>
<p></p>
<p>Schéma de principe du fonctionnement d’un SBC :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/large.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/large.png" />
<p></p>
</section>
</section>
<section id="generalites-telephonie">
<h3>Généralités Téléphonie<a class="headerlink" href="#generalites-telephonie" title="Link to this heading">#</a></h3>
<section id="codecs-audio">
<h4>Codecs audio<a class="headerlink" href="#codecs-audio" title="Link to this heading">#</a></h4>
<p>Le choix du codec dépend des paramètres suivants:</p>
<blockquote>
<div><ul class="simple">
<li><p>Qualité vocale souhaitée</p></li>
<li><p>Bande passante disponible et taux de perte de paquets</p></li>
<li><p>Prise en charge par les appareils terminaux, PBX et le fournisseur SIP</p></li>
</ul>
</div></blockquote>
<section id="g711">
<h5>G711<a class="headerlink" href="#g711" title="Link to this heading">#</a></h5>
<p>Le G711 ou encore PCM30 / MIC, est le codec audio par défaut utilisé dans la téléphonie classique.</p>
<p>Les caractéristiques du codec G.711 sont les suivantes :</p>
<ul class="simple">
<li><p>Bande de fréquences : 300-3400Hz</p></li>
<li><p>Fréquence d’achantillonnage de 8 khz</p></li>
<li><p>Débit fixe de 64 kbits/s (échantillons de 8 bits x 8 kHz)</p></li>
<li><p>Délai de compression de 0,125 ms (sans aucun délai d’anticipation)</p></li>
</ul>
<p>MOS :</p>
<ul class="simple">
<li><p>Mesure de qualité en conditions idéales : 4,45 en G.711 Loi-A</p></li>
<li><p>Mesure de qualité en condition dégradées :  4,11 en G.711 Loi-A</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Les MOS ci-dessus sont basés sur le site <a class="reference external" href="https://w3tel.com/documentation-voip/codecs/g-711/">https://w3tel.com/documentation-voip/codecs/g-711/</a></p>
</div>
<p>Pour tout appel passant par IP, une initiation de communications est procédé par le protocole SIP.
Ce dernier pourrait être comparable au fonctionnement du TCP, mais à la couche 7 du modèle OSI.</p>
<p>Capture wireshark d’une conversation en G711 (flux RTP):</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G711.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G711.png" />
<p></p>
<p>Comme escompté, nous remarquons que la discussion transite du téléphone 192.168.1.122 en passant par le serveur 3CX 192.168.1.120 .</p>
<p>La première chose qui est importante à souligner, est que les paquets utilisent le protocole de transport UDP (couche OSI 4) pour naviguer à travers le réseau, réduisant donc la latence potentielle de la conversation.</p>
<p>Étant donné que le trafic est d’interne à interne, il n’est par défaut pas chiffré, laissant le payload contenu dans le RTP visible en clair.
Il est donc tout à fait possible à partir d’un fichier d’un logiciel tel que Wireshark, d’écouter une conversation à partir de la conversation RTP !</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/i2i-call-RTP-voice-recording.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/i2i-call-RTP-voice-recording.png" />
</section>
<section id="g722">
<h5>G722<a class="headerlink" href="#g722" title="Link to this heading">#</a></h5>
<p>Aussi désigné comme la HD de l’audio, le G722 (ADPCM) est un codec avec une large bande fréquence. Il est donc beaucoup plus agréable de téléphoner avec celui-ci car le timbre de voix est bien moins altéré.</p>
<p>Les caractéristiques du codec G.722 sont les suivantes :</p>
<ul class="simple">
<li><p>Bande de fréquences : 50-7000Hz</p></li>
<li><p>Fréquence d’échantillonnage : 16 kHz</p></li>
<li><p>Débit fixe : 64 kbps</p></li>
<li><p>Délai de compression : Non spécifié</p></li>
</ul>
<p>MOS :</p>
<ul class="simple">
<li><p>Mesure de qualité en conditions idéales : MOS (Mean Opinion Score) similaire pour G.722 et G.711</p></li>
<li><p>Mesure de qualité en conditions dégradées : MOS (Mean Opinion Score) similaire pour G.722 et G.711</p></li>
</ul>
<p>Voici un graphique comparatif pour les bandes de fréquence du G711 et du G722 :</p>
<img alt="graph-g711-g722" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/g711-g722-frequency-response.jpg" />
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G722.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G722.png" />
<p></p>
</section>
<section id="g729">
<h5>G729<a class="headerlink" href="#g729" title="Link to this heading">#</a></h5>
<p>Ce codec (CS-ACELP), permet de téléphoner avec un débit réduit et dans des conditions réseau défavorables.
Sa qualité est donc moindre car son délai de compression est élevé.
Les discussions ont un timbre « métallique » voire « robotique ».</p>
<p>Nous remarquerons d’ailleurs que sur la capture wireshark ci-dessous, le volume du payload contenu dans le paquet RTP est bien inférieur à celui des 2 précédents codecs.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G729.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/rtp-conf-payload-G729.png" />
<p></p>
<p>Les caractéristiques du codec G.729 sont les suivantes :</p>
<ul class="simple">
<li><p>Bande de fréquences : 300-3400Hz</p></li>
<li><p>Fréquence d’échantillonnage : 8 kHz</p></li>
<li><p>Débit fixe : 8Kbps</p></li>
<li><p>Délai de compression : 15ms</p></li>
</ul>
<p>MOS :</p>
<ul class="simple">
<li><p>Mesure de qualité en conditions idéales : MOS (Mean Opinion Score) 4,04 en G.729a</p></li>
<li><p>Mesure de qualité en conditions dégradées : MOS (Mean Opinion Score) 3,51 en G.729a</p></li>
</ul>
</section>
</section>
<section id="sip-trunk">
<h4>SIP trunk<a class="headerlink" href="#sip-trunk" title="Link to this heading">#</a></h4>
<p>Un SIP trunk permet une liaison entre le réseau privé et le réseau public de téléphonie.
Plus concrètement, cette liaison permet d’émettre et recevoir des appels vers/depuis l’extérieur.</p>
<p>Un SIP trunk peut se louer par mois ou à l’utilisation à la minute par exemple.
Il se présente souvent comme un compte, avec un nom d’utilisateur, un mot de passe ainsi que l’IP du registrar.</p>
<p>Ce dernier est un serveur d’authentification, vérifiant les credentials des clients.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/sip-trunk-schema.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/sip-trunk-schema.png" />
<p><em>Source : ringcentral.com</em></p>
</section>
<section id="dtmf">
<h4>DTMF<a class="headerlink" href="#dtmf" title="Link to this heading">#</a></h4>
<p>Les touches DTMF (Dual-tone multi-frequency) usent d’une combinaison de fréquences pour composer un numéro de téléphone et interagir avec des serveurs vocaux interactifs.
Les fréquences utilisées sont situées entre 770Hz et 1633MHz.</p>
<p>Elles sont normalisées et spécifiées par la recommandation Q.23 de <abbr title="Union internationnale des Télécommunications">l’UIT</abbr>.</p>
<div class="admonition seealso">
<p class="admonition-title">Voir aussi</p>
<p>Un tableau interactif des touches DTMF est disponible sur la page suivante : <a class="reference external" href="https://fr.wikipedia.org/wiki/Code_DTMF">https://fr.wikipedia.org/wiki/Code_DTMF</a></p>
</div>
</section>
<section id="ivr">
<h4>IVR<a class="headerlink" href="#ivr" title="Link to this heading">#</a></h4>
<p>L’IVR (Interactive Voice Responder) est un répondeur interagissant avec les appelants via des <strong>menus vocaux</strong> et des <strong>messages préenregistrés.</strong>
Il est donc possible <strong>d’orienter ces personnes</strong> vers les services dont ils ont besoin <strong>automatiquement.</strong></p>
<p>Chez 3CX, le menu de configuration se présente de la sorte :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr.png" />
<p></p>
<p>Pour une entreprise, cet outil est très précieux car il permet d’optimiser au préalable le temps des collaborateurs et ainsi d’économiser de l’argent.
Configurer un IVR est donc une tâche à ne pas négliger !</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="exercices">
<h2>Exercices<a class="headerlink" href="#exercices" title="Link to this heading">#</a></h2>
<section id="exercice-1">
<h3>Exercice 1<a class="headerlink" href="#exercice-1" title="Link to this heading">#</a></h3>
<section id="demande">
<h4>Demande<a class="headerlink" href="#demande" title="Link to this heading">#</a></h4>
<p><strong>Exercice 1: Création d’un numéro d’assistance</strong></p>
<p>L’accessibilité téléphonique du service clientèle de Cardinal Bier Import AG doit être améliorée. À l’heure actuelle, le numéro principal n’est desservi que par une seule personne. Récemment, une application de Customer Releationship Management a été installée. Désormais, les commandes, réclamations ou autres demandes des clients sont enregistrées électroniquement. Une équipe de 4 collaboratrices a été formée. La répartition des appels au sein de cette équipe doit être définie. Créez une solution de téléphonie pour le service clientèle de Cardinal Bier Import AG. Vous disposez d’une instance vPBX de Peoplefone ou d’autres installations. Lisez les exigences de l’entreprise et établissez une configuration.</p>
<p><strong>Besoins en téléphonie du service clientèle</strong></p>
<p></p>
<ul class="simple">
<li><p>Horaires d’ouverture du lundi au vendredi de 8h00 à 18h00 et le samedi de 8h00 à 17h00</p></li>
<li><p>Saisie de tous les jours fériés catholiques légaux pour le site de Fribourg, pour les 12 prochains mois.</p></li>
<li><p>IVR pour allemand, français et anglais en amont</p></li>
</ul>
<p>Formez des groupes pertinents. Les appels doivent être répartis de manière séquentielle au sein du groupe. Il doit y avoir passage d’un groupe à un autre, si personne ne répond ou si la ligne est occupée. L’appel passera sur messagerie et signalera qu’aucun collaborateur n’est libre, seulement aucune personne ne répond. Les équipes parlant les langues officielles du canton reçoivent un numéro d’appel externe et les collaboratrices peuvent passer des appels externes sur lle téléphone IP avec ce numéro ou avec le numéro principal.</p>
<p>Les textes de message suivants peuvent être repris dans le fichier ZIP ou vous pouvez en enregistrer vous-même:</p>
<ul class="simple">
<li><p>HPN_AB_FeiertagFerien.wav</p></li>
<li><p>HPN_AB_keinMitarbeiterFrei.wav</p></li>
<li><p>HPN_AB_Oefffnungszeiten.wav</p></li>
<li><p>IVR_Ansage.wav</p></li>
</ul>
<p>Fichiers WAV
Le texte parlé des fichiers WAV ne doit pas correspondre à 100% à la problématique de cet exercice.
Les utilisateurs suivants doivent être enregistrés:</p>
<ul class="simple">
<li><p>Meier Anna, parle allemand, français</p></li>
<li><p>Müller Janine, parle allemand, anglais</p></li>
<li><p>Angeloz Marie, parle français</p></li>
<li><p>Ducrest Sophie, parle français, anglais</p></li>
</ul>
<p>Mission par groupe de 2 ou 4:</p>
<ul class="simple">
<li><p>Tracez le Call Flow pour le numéro principal (modèles disponibles dans le chapitre 10 du module 361)</p></li>
<li><p>Configurez l’installation en fonction des exigences</p></li>
</ul>
<p>Testez l’installation et consignez les tests dans un protocole</p>
</section>
<section id="workflow">
<h4>Workflow<a class="headerlink" href="#workflow" title="Link to this heading">#</a></h4>
<p>La chose la plus importante à faire dans un exercice tel quel, est de dessiner un schéma de principe très simple, à la main de préférence.</p>
<p>Cela permet de visualiser au mieux la demande et de pouvoir poser des questions au client si les indications ne sont pas claires !</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-ex1.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-ex1.png" />
<p></p>
<p>La demande est désormais plus compréhensible, nous allons donc maintenant procéder à la configuration de notre PBX virtuel !</p>
<p>En supposant que le SIP trunk et que les règles entrantes / sortantes sont déjà configurées, je vous propose de commencer par les utilisateurs :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/users1.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/users1.png" />
<p></p>
<p><em>Cependant, pour avoir une idée de comment se configure une règle sortante, je vous invite à accéder au lien suivant : https://www.3cx.fr/docs/manuel/avance/#h.y5la85hz60l</em></p>
<p></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Pour l’exercice, seuls 2 téléphones IP Yealink étaient à disposition ; ils seront configurés pour les utilisateurs 100 et 101.</p>
</div>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/users1.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/users1.png" />
<p></p>
<p>Configuration Janine :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/janine.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/janine.png" />
<p></p>
<p>Les champs obligatoires à remplir lors de la création de l’utilisateur sont les suivants :</p>
<ul class="simple">
<li><p>Extension</p></li>
<li><p>Prénom</p></li>
<li><p>Nom</p></li>
<li><p>Adresse Mail</p></li>
</ul>
<p>Par la suite, il est nécessaire de <strong>configurer les groupes d’appels</strong> en fonction des <strong>langues parlées</strong> par les collaborateurs :
Nous allons donc ici configurer 3 groupes :</p>
<blockquote>
<div><ul class="simple">
<li><p>Groupe allemand (810)</p></li>
<li><p>Groupe francais (820)</p></li>
<li><p>Groupe anglais (830)</p></li>
</ul>
</div></blockquote>
<p>Dans les paramètres de chacun des groupes, il est <strong>important</strong> de sélectionner la <strong>sonnerie en parallèle (sonne tous)</strong> dane le but d’éviter le cas suivant :</p>
<p>Imaginons que nous configurions la sonnerie à la suite 1 à 1 (Janine puis Anna dans l’ordre).
Un client appelle le groupe allemand, mais Janine est absente ou alors cette dernière a juste pris une pause café de 5 minutes.
Dans ce cas-là, le client tombera directement sur la messagerie de Janine sans passer par Anna, qui elle, est bien présente.</p>
<p>Cela pourrait présenter un inconvénient majeur pour les collaborateurs et créer une frustration côté client.</p>
<p>Voici pour exemple la configuration du groupe allemand :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/groupe-appel-810.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/groupe-appel-810.png" />
<p></p>
<p>Tout de suite après, nous pouvons créer un IVR :</p>
<p>En premier temps, nous choisissons le nom de l’IVR, son n° d’extension, son type, le message pré-enregistré ainsi que la langue des directives vocales.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr-config1.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr-config1.png" />
<p></p>
<p>Après cela, nous définissons comment chaque touche agit :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr-config2.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/ivr-config2.png" />
<p></p>
<p>Ici, nous voulons que la touche n°1 appelle le groupe allemand, que la n°2 appelle le groupe francais et que la n°3 appelle le groupe anglais.
En cas de non réponse, l’appelant se verra redirigé vers la messagerie vocale de l’extension n°299 « occupé ».</p>
<p>Il est nécessaire de <strong>répéter cette configuration pour chaque groupe d’appel.</strong></p>
<p>Voici la configuration de l’utilisateur 299 « occupé » :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/occupé.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/occupé.png" />
<p></p>
<p>Maintenant, créons les règles lorsque le bureau est fermé ou lorsque le jour en question est férié / chômé :</p>
<p>Il est possible de le faire pour un <strong>SIP trunk</strong>, une <strong>règle entrante</strong> ou encore dans les <strong>paramètres généraux de 3CX.</strong>
Ici, nous avons choisi la 3ème option.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/férié.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/férié.png" />
<p></p>
<p>Désormais, il ne manque plus que définir le routage dans le SIP Trunk pour définir où seront redirigés les utilisateurs en fonction des 2 cas précédemment cités.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/trunk-routage.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/trunk-routage.png" />
<p></p>
<p>Il ne manque plus que la configuration des terminaux pour que l’installation soit opérationnelle.</p>
<p>Tout d’abord, il est nécessaire d’accéder au menu de téléconfiguration de l’utilisateur et de rentrer le modèle de l’appareil ainsi que son adresse MAC.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/tel-config.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/tel-config.png" />
<p></p>
<p>Après cela, il faut enregistrer le nom d’utilisateur et le mot de passe que vous rentrerez dans le menu d’auto-provisioning du poste IP fixe.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/id-tel.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/id-tel.png" />
<p></p>
<p>Le plus simple est d’accéder à la web interface de chaque terminal IP et de saisir le lien de provisionning dans le menu correspondant afin que le PBX s’occupe seul de la configuration.</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/provision.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/provision.png" />
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/T46-3cx.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/T46-3cx.png" />
<p></p>
<p>Après avoir redémarré nos terminaux, notre installation est fin prête à être testée et déployée pour l’exercice !!</p>
</section>
</section>
<hr class="docutils" />
<section id="exercice-2">
<h3>Exercice 2<a class="headerlink" href="#exercice-2" title="Link to this heading">#</a></h3>
<section id="nat-pat-avec-installation-app-natel-externe">
<h4>1 - NAT / PAT avec installation app natel externe<a class="headerlink" href="#nat-pat-avec-installation-app-natel-externe" title="Link to this heading">#</a></h4>
<p>Workflow de l’exercice :</p>
<p>Dépannage 3CX</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/depannage-3cx.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/depannage-3cx.png" />
<p></p>
<p>Vous avez la possibilité à travers ce menu de définir si oui ou non le serveur 3CX agit en tant qu’intermédiaire pour les appels.
Ici, cela nous sera utile afin de nous simplifier la tâche, au lieu de configurer un port de mirroring sur le switch par exmple.</p>
<p>La prochaine étape sera de créer la règle NAT/PAT dans le routeur / firewall du réseau (ici Centro Business 2.0 Swisscom)
Nous accédons donc à la web interface administrateur de ce dernier <span class="menuselection">Réseau ‣ Port Forwarding ‣ Create new rule</span>.</p>
<ul class="simple">
<li><p>Port TCP 5001 (HTTPS)</p></li>
<li><p>Port TCP/UDP 5090 (Tunnel 3CX)</p></li>
</ul>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/natpat-swisscom-ex2.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/natpat-swisscom-ex2.png" />
<p></p>
<p>A la suite de cette configuration, nous pouvons télécharger l’application 3CX sur notre téléphone.</p>
<div class="admonition warning">
<p class="admonition-title">Avertissement</p>
<p>Sur Android, l’application <strong>nécessite</strong> le GSF afin d’afficher les notifications d’appels entrants.
Dans le cas contraire, vous ne pourrez pas répondre aux appels, mais serez en mesure d’en passer (appels sortants).</p>
</div>
<p>Précision faite, il est temps d’installer l’application sur notre appareil !</p>
<ul class="simple">
<li><p>Rendez-vous dans votre <span class="menuselection">gestionnaire de paquets / applications préféré ‣ Tapez « 3CX » dans la barre de recherche ‣ Installez l’application</span>.</p></li>
<li><p>Ensuite, lisez et acceptez les conditions d’utilisation de l’app.</p></li>
<li><p>Pour finir, scannez le QR code que vous trouvez dans la configuration de votre utilisateur 3CX.</p></li>
</ul>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/install-android.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/install-android.png" />
<p></p>
<p>Vous êtes désormais connecté à votre compte, vous permettant donc de passer des appels et d’envoyer des messages dans le service de chat 3CX.</p>
<p></p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-app-qr.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/schema-app-qr.png" />
</section>
<section id="app-1-webclient-en-interne-avec-wireshark">
<h4>2 - 1 App + 1 Webclient en interne avec Wireshark<a class="headerlink" href="#app-1-webclient-en-interne-avec-wireshark" title="Link to this heading">#</a></h4>
<p>Après avoir vu comment fonctionnaientt les communications SIP / RTP, il est nécessaire de comprendre comment se passent les communications passant à travers des applications ou par WebRTC.</p>
<p>Pour illustrer cela, rien de mieux qu’une capture wireshark accompagnée d’un petit schéma réseau.d</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/udp-stream.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/udp-stream.png" />
<p></p>
<p>Avant que la communication commence entre les appareils, un handshake TLS1.2 est initié afin d’échanger les clés nécessaires au chiffrement de la communication.</p>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>Il est important de noter qu’un chiffrement <strong>TLS 1.2 min.</strong> est recommandé pour <strong>garantir l’intégrité et la confidentialité</strong> de la communication.</p>
</div>
<p>Voici comment se passe un handshake TLS :</p>
<img alt="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/tls-ssl-handshake.png" src="https://raw.githubusercontent.com/algues111/docs-cfc/main/docs/source/images/M362/tls-ssl-handshake.png" />
<p></p>
<div class="admonition-lien-utile admonition">
<p class="admonition-title">Lien utile</p>
<p>TLS / SSL protocols  : <a class="reference external" href="https://www.cloudflare.com/fr-fr/learning/ssl/what-happens-in-a-tls-handshake/">https://www.cloudflare.com/fr-fr/learning/ssl/what-happens-in-a-tls-handshake/</a></p>
</div>
</section>
<section id="telephones-sip-avec-wireshark-comparaison-g711-g722-g729">
<h4>3 - 2 Téléphones SIP avec Wireshark (comparaison G711/G722/G729 )<a class="headerlink" href="#telephones-sip-avec-wireshark-comparaison-g711-g722-g729" title="Link to this heading">#</a></h4>
<p>Concernant cet exercice, je vous invite à vous rediriger vers la section discutant des codecs audio, car les captures Wireshark ont été prises lors de cet exercice.</p>
</section>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="page précédente">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">précédent</p>
        <p class="prev-next-title">Documentation CFC-IBM</p>
      </div>
    </a>
    <a class="right-next"
       href="Documentation-M144.html"
       title="page suivante">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">suivant</p>
        <p class="prev-next-title">Module 144 : Réseaux sans-fil (en travaux)</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenu
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cx">3CX</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#qu-est-ce-que-3cx">Qu’est-ce que 3CX ?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#licences">Licences</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#differents-types-d-installation">Différents types d’installation</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#linux">Linux</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#windows">Windows</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#interface">Interface</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#web-interface-admin">Web interface (admin)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#web-interface-client">Web Interface (client)</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#chats-chats-de-groupe">Chats &amp; Chats de groupe</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#meetings">Meetings</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#historique-des-appels">Historique des appels</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#cahier-de-contacts">Cahier de contacts</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#boite-de-messagerie-vocale">Boîte de messagerie vocale</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reseau-telephonie">Réseau &amp; Téléphonie</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generalites-reseau">Généralités Réseau</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dect-digital-enhanced-cordless-telecommunications">DECT : Digital Enhanced Cordless Telecommunications</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ata-analogic-terminal-adapter">ATA : Analogic terminal adapter</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exigences-reseau">Exigences réseau</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fonctions-de-reseau">Fonctions de réseau</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#poe-power-over-ethernet">PoE (Power over Ethernet)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#lldp-link-layer-discovery-protocol">LLDP (Link Layer Discovery Protocol)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#stun-simple-traversal-of-udp-over-nat">STUN (Simple Traversal of UDP over NAT)</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sbc-session-board-controller">SBC (Session Board Controller)</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generalites-telephonie">Généralités Téléphonie</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#codecs-audio">Codecs audio</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g711">G711</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g722">G722</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#g729">G729</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#sip-trunk">SIP trunk</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dtmf">DTMF</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#ivr">IVR</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#exercices">Exercices</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-1">Exercice 1</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#demande">Demande</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow">Workflow</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exercice-2">Exercice 2</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#nat-pat-avec-installation-app-natel-externe">1 - NAT / PAT avec installation app natel externe</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#app-1-webclient-en-interne-avec-wireshark">2 - 1 App + 1 Webclient en interne avec Wireshark</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#telephones-sip-avec-wireshark-comparaison-g711-g722-g729">3 - 2 Téléphones SIP avec Wireshark (comparaison G711/G722/G729 )</a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Par Arthur LE GUENNEC
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Arthur LE GUENNEC.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>